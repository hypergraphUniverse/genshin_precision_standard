# 3 数据读取

本章节叙述的是从 GenshinData/ExcelOutput 中相关JSON文件读取到对应所需数据的具体细节检索方法。这种检索过程对于获取最精确数值，以及工具自动化有较为重大的意义。这个章节仅对读取数据的过程进行规范，对于最终检索出来的数据如何运算，则放在第四章讲解。

JSON文件中对应位置保存的小数精度不一致，但是在解析JSON将数据保存在内存中时，**需要使用32位浮点数的数据格式进行保存**。

## 3.1 角色面板值

### 3.1.1 AvatarExcelConfigData.json

#### 内容概述

AvatarExcelConfigData.json 保存了相关角色信息的键值对。

推荐的定位方法是：
- 角色id 

与数值运算相关内容有：
- 一级基础值
- 基础值提升曲线类型
- 基础值突破奖励id
#### 角色id

AvatarExcelConfigData 其中的 id 是定位角色有效、通用且易于维护的一个字段，其他字段也可能包含角色名称信息，例如 iconName、sideIconName、imageName。

以文件前面的几个 id 为例：

```json
{
    "id": 10000002,
    //id=10000002角色的相关数据...
},
{
    "id": 10000003,
    //id=10000003角色的相关数据...
},
//有其他id的数据...
```


如果希望通过其中某一字段来定位角色，则需要维护一个角色与 id 的映射表，例如：`神里绫华-Ayaka-10000002`。
#### 一级基础值

一级基础值，是指某一角色在角色等级为 1 时，生命值、攻击力、防御力、暴击率和暴击伤害的数值。在以id定位到对应角色后，同一层级下，不同类型的基础值对应的 json 字段如下表：

| 基础值类型 |     字段     |
| :--------: | :----------: |
|   生命值   |    hpBase    |
|   攻击力   |  attackBase  |
|   防御力   | defenseBase  |
|   暴击率   |   critical   |
|  暴击伤害  | criticalHurt |

以神里凌华的相关数据为例：

```Json
{
    "hpBase": 1000.9860229492188,
    "attackBase": 26.62660026550293,
    "defenseBase": 61.0265998840332,
    "critical": 0.05000000074505806,
    "criticalHurt": 0.5,
    "id": 10000002,
    //其他神里凌华的数据...
},
//其他角色的数据...
```

以查询神里绫华初始攻击力的 python 代码为例：

```python
next((x for x in json.load(open('AvatarExcelConfigData.json', encoding='utf-8')) if x['id'] == 10000002), None)['attackBase']
```
⚠ 再次提醒，虽然这里的数值是明显的 Float64 格式，但是在保存时，建议使用 Float32 格式进行存储和运算。 

截止目前时间，所有角色的初始暴击率一级基础值均为 0.05，初始暴击伤害一级基础值均为 0.5，因此这两个一级基础值可以不用查询。

#### 基础值提升曲线类型

#### 基础值突破奖励

### 3.1.2 


## 3.2 武器基础值

## 3.3 角色倍率

## 3.4 圣遗物主词条

## 3.5 圣遗物副词条

## 3.6 抗性

## 3.x 附表
